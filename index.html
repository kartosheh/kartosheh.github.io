<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>سامانه مدیریت کارنامه | مدارس حلی</title>

  <!-- Fonts & icons -->
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- AOS for scroll animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" />

  <style>
    :root{
      --heli-blue: #003366;
      --heli-deep: #004d99;
      --gold: #ffd700;
      --bg: #fbfcfd;
      --card-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }

    html { scroll-behavior: smooth; scroll-snap-type: y proximity; }
    body {
      margin:0;
      font-family: 'Vazirmatn', sans-serif;
      background: var(--bg);
      color:#111;
      line-height:1.7;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    header{
      background: linear-gradient(180deg,var(--heli-deep),var(--heli-blue));
      color:#fff;
      text-align:center;
      padding:3rem 1rem 2rem;
    }

    header h1{
      margin:0;
      font-size:2.1rem;
      display:inline-flex;
      gap:.6rem;
      align-items:center;
      animation: fadeInDown .9s ease-out both;
    }

    header p{
      margin:.6rem 0 1rem;
      opacity:.95;
    }

    .badge {
      background-color: var(--gold);
      color: var(--heli-blue);
      font-weight:700;
      display:inline-block;
      padding:.5rem 1rem;
      border-radius:999px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
      transform-origin:center;
      margin: 0.6rem auto 1.2rem;
      font-size:1rem;
      display:flex;
      gap:.6rem;
      align-items:center;
      justify-content:center;
      animation: pulse 2.2s infinite;
    }

    nav ul{
      list-style:none;
      padding:0;
      margin:1rem 0 0;
      display:flex;
      gap:1.2rem;
      justify-content:center;
      flex-wrap:wrap;
    }

    nav a{
      color:#fff;
      text-decoration:none;
      font-weight:600;
      transition: color .18s ease, transform .18s ease;
      padding:.25rem .5rem;
      border-radius:6px;
    }

    nav a:hover{ color: var(--gold); transform: translateY(-2px); }

    main{
      max-width:1000px;
      margin:2rem auto;
      padding:0 1rem 4rem;
    }

    section{
      margin:0 0 4.2rem;
      background: transparent;
      scroll-snap-align:start;
      animation: fadeInUp .8s ease-out both;
    }

    h2{
      color:var(--heli-deep);
      font-size:1.5rem;
      margin:0 0 .8rem;
    }

    p { margin:0 0 1rem; color:#222; }

    .features ul{
      padding-left:0;
      list-style: none;
      display:grid;
      grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
      gap:1rem;
    }

    .features li{
      background:#fff;
      padding:1rem;
      border-radius:12px;
      box-shadow: var(--card-shadow);
      font-weight:600;
      color:var(--heli-deep);
    }

    .schools ul{ display:grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:12px; padding:0; list-style:none; }
    .schools li{
      background:linear-gradient(180deg,#fff, #fbfbff);
      padding:.9rem;
      border-radius:10px;
      box-shadow: var(--card-shadow);
      text-align:center;
      color:var(--heli-deep);
      font-weight:700;
    }

    .screenshots img{
      display:block;
      width:100%;
      max-width:840px;
      margin: 1rem auto;
      border-radius:14px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
      transform-origin:center;
    }

    .contact-card{
      background:#fff;
      padding:1rem;
      border-radius:12px;
      box-shadow: var(--card-shadow);
    }

    footer{
      background:var(--heli-blue);
      color:#fff;
      padding:2rem 1rem;
      text-align:center;
    }

    footer blockquote{
      margin:1rem auto 0;
      color:var(--gold);
      font-style:italic;
      max-width:760px;
    }

    /* Chat button: moved to right and a bit higher */
    .chat-launch {
      position: fixed;
      right:20px;
      bottom:90px;
      width:64px;
      height:64px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      background: radial-gradient(circle at 35% 30%, #fff7d0, #ffd700 35%, #ffcc00 65%);
      box-shadow: 0 10px 30px rgba(255,200,30,0.25), 0 6px 18px rgba(0,0,0,0.12);
      cursor:pointer;
      z-index:1200;
      transition: transform .18s ease;
      animation: pulse 2.2s infinite;
    }

    .chat-launch:active { transform: scale(.96); }
    .sparkle-icon{
      font-size:1.6rem;
      color: var(--heli-blue);
      line-height:1;
      font-weight:900;
      user-select:none;
      display:inline-block;
    }

    /* Chatbox: hidden via opacity/transform (no layout jump) */
    .chatbox {
      position: fixed;
      right:100px;
      bottom:96px;
      width:320px;
      max-width:calc(100% - 140px);
      background:#fff;
      border-radius:12px;
      overflow:hidden;
      z-index:1199;
      box-shadow: 0 20px 50px rgba(0,0,0,0.18);
      border: 2px solid var(--heli-blue);

      /* hidden state */
      opacity: 0;
      transform: translateY(10px) scale(.98);
      visibility: hidden;
      pointer-events: none;

      /* smooth transition */
      transition: opacity 240ms cubic-bezier(.2,.9,.2,1), transform 240ms cubic-bezier(.2,.9,.2,1), visibility 240ms;
      display:flex;
      flex-direction:column;
    }

    /* visible state */
    .chatbox.open {
      opacity: 1;
      transform: translateY(0) scale(1);
      visibility: visible;
      pointer-events: auto;
    }

    .chat-header{
      background:var(--heli-blue);
      color:var(--gold);
      padding:.6rem .9rem;
      font-weight:800;
      text-align:center;
    }

    .chat-log{
      padding:.7rem;
      max-height:220px;
      overflow:auto;
      font-size:.95rem;
    }

    .chat-log .user-msg{
      text-align:right;
      background: rgba(0,77,153,0.06);
      color:var(--heli-deep);
      display:inline-block;
      padding:.45rem .7rem;
      border-radius:12px;
      margin:.45rem 0;
      max-width:84%;
      float:right;
      clear:both;
    }

    .chat-log .bot-msg{
      text-align:left;
      background:#f3f7ff;
      color:#222;
      display:inline-block;
      padding:.45rem .7rem;
      border-radius:12px;
      margin:.45rem 0;
      max-width:84%;
      float:left;
      clear:both;
    }

    .chat-input{
      border-top:1px solid #eee;
      display:flex;
      gap:.5rem;
      padding:.5rem;
      background:#fafafa;
      align-items:center;
    }

    .chat-input input{
      flex:1;
      border:none;
      padding:.5rem .6rem;
      border-radius:8px;
      font-size:.95rem;
      background:#fff;
      outline:none;
    }

    .chat-input button{
      background:var(--heli-deep);
      color:var(--gold);
      border:none;
      padding:.6rem .7rem;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
    }

    @media (max-width:640px){
      .chat-launch { right:12px; bottom:80px; width:56px; height:56px; }
      .chatbox { right:72px; bottom:86px; width:86vw; max-width:420px; }
      header h1 { font-size:1.6rem; }
      main { margin:1.2rem auto; padding:0 14px 3rem; }
    }

    @keyframes fadeInUp {
      from { opacity:0; transform: translateY(22px); }
      to { opacity:1; transform: translateY(0); }
    }

    @keyframes fadeInDown {
      from { opacity:0; transform: translateY(-18px); }
      to { opacity:1; transform: translateY(0); }
    }

    @keyframes pulse {
      0% { transform: scale(1); box-shadow: 0 8px 20px rgba(255,205,0,0.18); }
      50% { transform: scale(1.06); box-shadow: 0 20px 40px rgba(255,205,0,0.28); }
      100% { transform: scale(1); box-shadow: 0 8px 20px rgba(255,205,0,0.18); }
    }
  </style>
</head>
<body>

  <header>
    <h1 data-aos="fade-down"><i class="fa-solid fa-file-lines"></i> سامانه مدیریت کارنامه</h1>
    <p data-aos="fade-up">طراحی‌شده برای مدرسه حلی ۱ و قابل استفاده در سایر مدارس حلی</p>

    <div class="badge" data-aos="zoom-in">
      <i class="fa-solid fa-shield-halved"></i>
      <span>ویژه مدارس استعدادهای درخشان حلی</span>
    </div>

    <nav>
      <ul>
        <li><a href="#intro"><i class="fa-solid fa-star"></i> معرفی</a></li>
        <li><a href="#features"><i class="fa-solid fa-list-check"></i> امکانات</a></li>
        <li><a href="#schools"><i class="fa-solid fa-school"></i> مدارس حلی</a></li>
        <li><a href="#screenshots"><i class="fa-solid fa-image"></i> تصاویر</a></li>
        <li><a href="#contact"><i class="fa-solid fa-envelope"></i> تماس</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="intro" data-aos="fade-up">
      <h2>معرفی سامانه</h2>
      <p>سامانه کارنامه یک پلتفرم مدرن برای مدیریت نمرات، لیست دانش‌آموزان، و گزارش‌گیری است. این سامانه با توجه به نیازهای مدارس حلی طراحی شده و قابل توسعه برای سایر مدارس نیز می‌باشد.</p>
    </section>

    <section id="features" class="features" data-aos="fade-up">
      <h2>چرا این سامانه؟</h2>
      <ul>
        <li data-aos="fade-right"><i class="fa-solid fa-check"></i> پشتیبانی کامل از زبان فارسی و راست‌چین</li>
        <li data-aos="fade-left"><i class="fa-solid fa-cog"></i> قابل تنظیم برای الگوهای مدرسه‌ای مختلف</li>
        <li data-aos="fade-right"><i class="fa-solid fa-rocket"></i> طراحی ساده، سریع و قابل ارائه در جلسات رسمی</li>
      </ul>
    </section>

    <section id="schools" class="schools" data-aos="fade-up">
      <h2>مدارس حلی پشتیبانی‌شده</h2>
      <ul>
        <li data-aos="fade-left">مدرسه حلی ۱ تهران</li>
        <li data-aos="fade-right">مدرسه حلی ۲ تهران</li>
        <li data-aos="fade-left">مدرسه حلی مشهد</li>
        <li data-aos="fade-right">مدرسه حلی شیراز</li>
      </ul>
    </section>

    <section id="screenshots" class="screenshots" data-aos="fade-up">
      <h2>تصاویر سامانه واقعی</h2>
      <img src="sc.jpeg" alt="نمونه داشبورد" data-aos="fade-left" />
      <img src="student.jpeg" alt="لیست دانش‌آموزان" data-aos="fade-right" />
    </section>

    <section id="contact" data-aos="fade-up">
      <h2>تماس با ما</h2>
      <div class="contact-card">
        <p>برای اطلاعات بیشتر یا درخواست دمو با ایمیل زیر در تماس باشید:</p>
        <p><strong>school@example.com</strong></p>
      </div>
    </section>
  </main>

  <footer>
    <p>© ۱۴۰۴ سامانه کارنامه | مدرسه حلی ۱</p>
    <blockquote>«العلم نور یقذفه الله فی قلب من یشاء» – علامه حلی</blockquote>
  </footer>

  <!-- Sparkle chat button (right & up) -->
  <div class="chat-launch" id="chat-launch" title="باز کردن دستیار حلی" onclick="toggleChatbox()" data-aos="zoom-in">
    <span class="sparkle-icon">✦</span>
  </div>

  <!-- Chatbox (hidden by default; opens with .open class) -->
  <div class="chatbox" id="chatbox" aria-hidden="true">
    <div class="chat-header">🤖 دستیار سامانه حلی</div>
    <div class="chat-log" id="chat-log" role="log" aria-live="polite"></div>
    <div class="chat-input">
      <input id="chat-input" type="text" placeholder="سوال خود را بنویسید و Enter را بزنید..." aria-label="پیام به دستیار" />
      <button id="chat-send" aria-label="ارسال پیام">ارسال</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

  <script>
    AOS.init({ duration: 750, easing: 'ease-out', once: true });

    const cannedResponses = {
      "سلام": "سلام! خوش اومدید. چطور می‌تونم کمک‌تون کنم؟",
      "امکانات": "سامانه شامل مدیریت نمرات، لیست دانش‌آموزان، گزارش‌گیری، و تنظیمات مدرسه است.",
      "مدارس": "در حال حاضر حلی ۱، حلی ۲، مشهد و شیراز در لیست پشتیبانی هستند.",
      "تماس": "برای تماس، لطفاً ایمیل school@example.com را استفاده کنید.",
      "کارنامه": "می‌تونید کارنامه رو مشاهده، ذخیره و چاپ کنید و گزارش‌های تجمعی هم داریم.",
      "دمو": "برای دمو لطفاً یک ایمیل بفرستید یا اینجا متن پیام‌تون رو بفرستید تا راهنمایی کنم."
    };

    function addMessage(content, cls){
      const log = document.getElementById('chat-log');
      const node = document.createElement('div');
      node.className = cls;
      node.innerText = content;
      log.appendChild(node);
      log.scrollTop = log.scrollHeight;
    }

    function generateReply(text){
      const key = text.trim();
      if(cannedResponses[key]) return cannedResponses[key];
      const lower = key.toLowerCase();
      if(lower.includes('سلام') || lower.includes('hi')) return cannedResponses["سلام"];
      if(lower.includes('امکانات') || lower.includes('feature')) return cannedResponses["امکانات"];
      if(lower.includes('مدرسه') || lower.includes('حلی')) return cannedResponses["مدارس"];
      if(lower.includes('تماس') || lower.includes('ایمیل')) return cannedResponses["تماس"];
      if(lower.includes('کارنامه')) return cannedResponses["کارنامه"];
      if(lower.includes('دمو') || lower.includes('demo')) return cannedResponses["دمو"];
      return "متأسفم، جواب دقیق این سوال رو فعلاً ندارم. می‌تونید سوال رو با جزئیات بپرسید یا ایمیل بزنید.";
    }

    // Toggle via class to avoid layout shifts
    function toggleChatbox() {
      const box = document.getElementById('chatbox');
      box.classList.toggle('open');
      const isOpen = box.classList.contains('open');
      box.setAttribute('aria-hidden', !isOpen);
      // Add initial greeting only once
      const log = document.getElementById('chat-log');
      if(isOpen && log.children.length === 0){
        setTimeout(()=> addMessage("سلام! من دستیار سامانه حلی هستم. برای شروع می‌توانید بنویسید: امکانات یا مدارس یا تماس.", 'bot-msg'), 220);
      }
    }

    // Outside click: close only when clicking outside both launch and chatbox
    document.addEventListener('click', function(e){
      const box = document.getElementById('chatbox');
      const launch = document.getElementById('chat-launch');
      if(!box || !launch) return;
      if(!box.classList.contains('open')) return;

      const clickedInsideBox = !!e.target.closest('#chatbox');
      const clickedLaunch = !!e.target.closest('#chat-launch');

      if(!clickedInsideBox && !clickedLaunch){
        box.classList.remove('open');
        box.setAttribute('aria-hidden', 'true');
      }
    });

    // Send logic
    document.getElementById('chat-send').addEventListener('click', function(){
      const input = document.getElementById('chat-input');
      const text = input.value.trim();
      if(!text) return;
      addMessage(text, 'user-msg');
      setTimeout(()=> {
        const reply = generateReply(text);
        addMessage(reply, 'bot-msg');
      }, 450);
      input.value = '';
    });

    document.getElementById('chat-input').addEventListener('keydown', function(e){
      if(e.key === 'Enter'){
        e.preventDefault();
        document.getElementById('chat-send').click();
      }
    });

    // Optional: prevent focus-caused jumps on mobile by not auto-focusing input.
    // If you want the input focused without jump, you can call:
    // requestAnimationFrame(() => { document.getElementById('chat-input').focus(); });
    // after opening, but test on devices first.
  </script>
</body>
</html>
